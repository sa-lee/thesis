<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.3 Discussion | Exploratory data analysis for high-dimensional biological datasets</title>
  <meta name="description" content="2.3 Discussion | Exploratory data analysis for high-dimensional biological datasets" />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="2.3 Discussion | Exploratory data analysis for high-dimensional biological datasets" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.3 Discussion | Exploratory data analysis for high-dimensional biological datasets" />
  
  
  

<meta name="author" content="Stuart Lee" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="2-2-results.html"/>
<link rel="next" href="2-4-conclusion.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="template/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./"></a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="abstract.html"><a href="abstract.html"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-ch-intro.html"><a href="1-ch-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="2-ch-plyranges.html"><a href="2-ch-plyranges.html"><i class="fa fa-check"></i><b>2</b> plyranges: a grammar of graphics for genomics data</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-background.html"><a href="2-1-background.html"><i class="fa fa-check"></i><b>2.1</b> Background</a></li>
<li class="chapter" data-level="2.2" data-path="2-2-results.html"><a href="2-2-results.html"><i class="fa fa-check"></i><b>2.2</b> Results</a></li>
<li class="chapter" data-level="2.3" data-path="2-3-discussion.html"><a href="2-3-discussion.html"><i class="fa fa-check"></i><b>2.3</b> Discussion</a></li>
<li class="chapter" data-level="2.4" data-path="2-4-conclusion.html"><a href="2-4-conclusion.html"><i class="fa fa-check"></i><b>2.4</b> Conclusion</a></li>
<li class="chapter" data-level="2.5" data-path="2-5-acknowledgements-1.html"><a href="2-5-acknowledgements-1.html"><i class="fa fa-check"></i><b>2.5</b> Acknowledgements</a></li>
<li class="chapter" data-level="2.6" data-path="2-6-availability-of-data-and-materials.html"><a href="2-6-availability-of-data-and-materials.html"><i class="fa fa-check"></i><b>2.6</b> Availability of Data and Materials</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-ch-fluentGenomics.html"><a href="3-ch-fluentGenomics.html"><i class="fa fa-check"></i><b>3</b> Fluent genomics: integrating data with plyranges and tximeta</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-introduction.html"><a href="3-1-introduction.html"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="3-2-se.html"><a href="3-2-se.html"><i class="fa fa-check"></i><b>3.2</b> Import Data as a <em>SummarizedExperiment</em></a></li>
<li class="chapter" data-level="3.3" data-path="3-3-model-assays.html"><a href="3-3-model-assays.html"><i class="fa fa-check"></i><b>3.3</b> Model assays</a></li>
<li class="chapter" data-level="3.4" data-path="3-4-integrate-ranges.html"><a href="3-4-integrate-ranges.html"><i class="fa fa-check"></i><b>3.4</b> Integrate ranges</a></li>
<li class="chapter" data-level="3.5" data-path="3-5-discussion-1.html"><a href="3-5-discussion-1.html"><i class="fa fa-check"></i><b>3.5</b> Discussion</a></li>
<li class="chapter" data-level="3.6" data-path="3-6-software-availability.html"><a href="3-6-software-availability.html"><i class="fa fa-check"></i><b>3.6</b> Software Availability</a></li>
<li class="chapter" data-level="3.7" data-path="3-7-acknowledgements-2.html"><a href="3-7-acknowledgements-2.html"><i class="fa fa-check"></i><b>3.7</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-ch-intron.html"><a href="4-ch-intron.html"><i class="fa fa-check"></i><b>4</b> Tidy coverage analysis uncovers intron retention</a></li>
<li class="chapter" data-level="5" data-path="5-ch-tsne.html"><a href="5-ch-tsne.html"><i class="fa fa-check"></i><b>5</b> Spurious embeddings from non-linear dimensionality reduction methods and how to find them</a></li>
<li class="chapter" data-level="6" data-path="6-ch-conclusion.html"><a href="6-ch-conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion and future plans</a></li>
<li class="chapter" data-level="" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i>Bibliography</a></li>
<li class="divider"></li>
<li><strong><a href="https://github.com/rstudio/bookdown" target="blank">Proudly published with bookdown</a></strong></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploratory data analysis for high-dimensional biological datasets</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="discussion" class="section level2">
<h2><span class="header-section-number">2.3</span> Discussion</h2>
<p>The design of <code>plyranges</code> adheres to well understood principles of
language and API design: cognitive consistency, cohesion,
endomorphism and expressiveness <span class="citation">(T R G Green AND Petre <a href="bibliography.html#ref-Green1996-qg" role="doc-biblioref">1996</a>)</span>.
To varying degrees, these principles also underlie the
design of <code>dplyr</code> and the Bioconductor infrastructure.</p>
<p>We have aimed for <code>plyranges</code> to have a simple and direct mapping to the
user’s cognitive model, i.e., how the user thinks about the data. This
requires careful selection of the level of abstraction so that the
user can express workflows in the language of genomics. This motivates
the adoption of the tidy GRanges object as our central data
structure. The basic data.frame and <code>dplyr</code> tibble lack any notion of
genomic ranges and so could not easily support our genomic grammar,
with its specific verbs for range-oriented data manipulation. Another
example of cognitive consistency is how <code>plyranges</code> is insensitive to
direction/strand by default when, e.g., detecting
overlaps. <code>GenomicRanges</code> has the opposite behavior. We believe that
defaulting to purely spatial overlap is most intuitive to most users.</p>
<p>To further enable cognitive consistency, <code>plyranges</code> functions are cohesive.
A function is defined to be cohesive if it performs a singular task without
producing any side-effects. Singular tasks can always be broken
down further at lower levels of abstraction.
For example, to resize a range, the user needs to specify which
position (start, end, midpoint) should be invariant over the
transformation. The <code>resize()</code> function from the <code>GenomicRanges</code> package
has a <code>fix</code> argument that sets the anchor, so calling <code>resize()</code>
coalesces anchoring and width modification. The coupling at the
function call level is justified since the effect of setting the width
depends on the anchor. However, <code>plyranges</code> increases cohesion and
decouples the anchoring into its own function call.</p>
<p>Increasing cohesion simplifies the interface to each operation, makes
the meaning of arguments more intuitive, and relies on function names
as the primary means of expression, instead of a more complex mixture
of function and argument names. This results in the
user being able to conceptualize the <code>plyranges</code> DSL as a flat catalog of
functions, without having to descend further into documentation to understand
a function’s arguments. A flat function catalog also enhances API
discoverability, particularly through auto-completion in
integrated developer environments (IDEs). One downside of pushing cohesion to
this extreme is that function calls become coupled, and care is
necessary to treat them as a group when modifying code.</p>
<p>Like <code>dplyr</code>, <code>plyranges</code> verbs are functional: they are free of side
effects and are generally endomorphic, meaning that when the input is a GRanges
object they return a GRanges object. This enables chaining of verbs
through syntax like the forward pipe operator from the <code>magrittr</code> package.
This syntax has a direct cognitive mapping to natural language and the intuitive notion of
pipelines. The low-level object-oriented APIs of Bioconductor tend to
manipulate data via sub-replacement functions, like <code>start(gr) &lt;- x</code>. These ultimately produce the side effect of replacing a symbol
mapping in the current environment and thus are not amenable to so-called
fluent syntax.</p>
<p>Expressiveness relates to the information content in code: the
programmer should be able to clarify intent without unnecessary
verbosity. For example, our overlap-based join operations are more
concise than the multiple steps necessary to achieve the same effect
in the original <code>GenomicRanges</code> API. In other cases, the <code>plyranges</code> API
increases verbosity for the sake of clarity and cohesion. Explicitly
calling <em>anchor()</em> can require more typing, but the code is easier to
comprehend. Another example is the set of routines for importing
genomic annotations, including <em>read_gff()</em>, <em>read_bed()</em>, and
<em>read_bam()</em>. Compared to the generic <em>import()</em> in <code>rtracklayer</code>, the
explicit format-based naming in <code>plyranges</code> clarifies intent and the
type of data being returned. Similarly, every <code>plyranges</code> function that
computes with strand information indicates its intentions by including
suffixes such as <em>directed</em>, <em>upstream</em> or <em>downstream</em> in its name,
otherwise strand is ignored. The <code>GenomicRanges</code> API does not make this
distinction explicit in its function naming, instead relying on a
parameter that defaults to strand sensitivity, an arguably confusing
behavior.</p>
<p>The implementation of <code>plyranges</code> is built on top of
Bioconductor infrastructure, meaning most functions are constructed
by composing generic functions from core Bioconductor packages. As a result, any
Bioconductor packages that uses data structures that inherit from GRanges will
be able to use <code>plyranges</code> for free. Another consequence of building on top of
Bioconductor generics is that the speed and memory usage of <code>plyranges</code>
functions are similar to the highly optimized methods implemented in Bioconductor
for GRanges objects.</p>
<p>A caveat to constructing a compatible interface with <code>dplyr</code> is that
<code>plyranges</code> makes extensive use of non-standard evaluation in R via
the <code>rlang</code> package <span class="citation">(Henry and Wickham <a href="bibliography.html#ref-R-rlang" role="doc-biblioref">2017</a>)</span>. Simply, this means that computations are
evaluated in the context of the GRanges objects. Both <code>dplyr</code> and
<code>plyranges</code> are based on the <code>rlang</code> language, because it allows for more
expressive code that is free of repeated references to the
container. Implicitly referencing the container is particularly
convenient when programming interactively. Consequently, when
programming with <code>plyranges</code>, a user needs to generally understand
the <code>rlang</code> language and how to adapt their code accordingly. Users
familiar with the tidyverse should already have such knowledge.</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="2-2-results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="2-4-conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sa-lee/thesis/edit/master/Rmd//02-plyranges.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
